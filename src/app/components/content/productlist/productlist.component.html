<div class="product-list-page ">
	<aside class="margin-top-20">
		<mat-accordion [multi]="true">
			<mat-expansion-panel [expanded]="true">
				<mat-expansion-panel-header>
					Brands
				</mat-expansion-panel-header>
				<div fxlayout="column" style="flex-direction: column; box-sizing: border-box; display: flex;">
					<mat-checkbox *ngFor='let brand_name of distinctbrandsArray' value="brand_name"
						(change)="refreshBrands($event,brand_name)">{{brand_name}}</mat-checkbox>
				</div>
			</mat-expansion-panel>
			<mat-expansion-panel [expanded]="true">
				<mat-expansion-panel-header>
					Price
				</mat-expansion-panel-header>
				<div fxlayout="column" style="flex-direction: column; box-sizing: border-box; display: flex;">
					From {{fromPrice.value}}
					<mat-slider #fromPrice (change)="updateFromPrice($event)" steps="1" min="0" max="1000"
						[value]="fromPrice"></mat-slider>
					To {{toPrice.value}}
					<mat-slider #toPrice (change)="updateToPrice($event)" steps="1" min="0" max="1000"
						[value]="toPrice"></mat-slider>
				</div>
			</mat-expansion-panel>
			<mat-expansion-panel [expanded]="true">
				<mat-expansion-panel-header>
					Discounts
				</mat-expansion-panel-header>
				<div fxlayout="column" style="flex-direction: column; box-sizing: border-box; display: flex;">
					<mat-checkbox>More than 50%</mat-checkbox>
					<mat-checkbox>More than 60%</mat-checkbox>
					<mat-checkbox>More than 65%</mat-checkbox>
					<mat-checkbox>More than 70%</mat-checkbox>
				</div>
			</mat-expansion-panel>
		</mat-accordion>
	</aside>
	<div *ngIf="products" class="product-list">
		<div class="productlistcontainer margin-top-20 pl-3" fxLayout="row wrap">
			<ng-container *ngFor="let product of products; let i = index">
				<ng-container
					*ngIf="fromPrice.value > 0 ?  (product.prepay_price >= fromPrice.value ? true : false): true">
					<ng-container *ngIf="toPrice.value > 0 ? (product.prepay_price <= toPrice.value): true">
						<mat-card
							*ngIf="selectedBrandsArray.length == 0 ? true: selectedBrandsArray.includes(product.brand_name)" class="product" fxLayout="column">
							<!-- <mat-card-subtitle>
								<span class="badge badge-danger">{{product.discount}}</span>
							</mat-card-subtitle> -->
							<img class="image img-cursor" mat-card-image src="{{product.image}}" alt="photo"
								(click)="showProductDetails({cname:cname,scname:scname,pid:product.item_id})">

							<mat-card-content>
								<p class="p-title">{{product.item_name}}</p>
								<p class="p-cost">
										<ng-container *ngIf="product.dealtype==''">
												<span class="old_cost">{{product.supplier_deal_price}}</span>
												<span class="new_cost">{{product.deal_price}}</span>
											</ng-container>
											<ng-container *ngIf="product.dealtype!='' && product.discount=='0'">
												<span class="new_cost">{{product.price}}</span>
											</ng-container>
											<ng-container *ngIf="product.dealtype!='' && product.discount!='0'">
												<span class="old_cost">{{product.price}}</span>
												<span class="new_cost">{{product.discount_amount}}</span>
											</ng-container>									
								</p>
								<button mat-button class="cart-btn" (click)="addToCart(product)">Add Cart</button>
							</mat-card-content>
							<mat-card-actions>
								<button mat-button><i class="fa fa-heart"></i></button>
								<button mat-button (click)="openShare($event)"><i class="fa fa-share-alt"></i></button>
							</mat-card-actions>
						</mat-card>
					</ng-container>
				</ng-container>
			</ng-container>


		</div>
	</div>
</div>